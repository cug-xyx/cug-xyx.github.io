{
  "hash": "31b6240de5681b794f0a5094c64dbc95",
  "result": {
    "markdown": "---\ntitle: Learn DataFrames.jl\nsubtitle: 学习Julia\ndate: 2023-6-19\ncategories:\n  - Julia\nnumber-sections: true\n---\n\n# 导入库\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\nusing CSV\nusing DataFrames\n```\n:::\n\n\n# 读取数据\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\ndf = CSV.read(\"../data/203st_idw_interp_0.05deg.csv\", DataFrame)\n# df = CSV.read(\"I:/order_data/Xujw/203st_idw_interp_0.05deg.csv\", DataFrame)\ndf # copy(df) 复制df\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 7 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>site</th><th>lon</th><th>lat</th><th>Eh</th><th>V</th><th>Ni</th><th>Ba</th></tr><tr><th></th><th title=\"String15\">String15</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>19G26</td><td>111.8</td><td>29.07</td><td>33.2</td><td>0.08</td><td>1.55</td><td>126.99</td></tr><tr><th>2</th><td>22G-80</td><td>111.93</td><td>28.94</td><td>163.6</td><td>0.45</td><td>2.77</td><td>71.83</td></tr><tr><th>3</th><td>19G22</td><td>111.95</td><td>28.98</td><td>-48.0</td><td>0.17</td><td>1.18</td><td>161.81</td></tr><tr><th>4</th><td>22G-83</td><td>111.98</td><td>29.11</td><td>64.8</td><td>0.25</td><td>0.59</td><td>136.21</td></tr><tr><th>5</th><td>22G-81</td><td>112.03</td><td>29.04</td><td>143.1</td><td>0.97</td><td>1.83</td><td>124.54</td></tr><tr><th>6</th><td>20DT-19G</td><td>112.07</td><td>29.09</td><td>26.0</td><td>0.853692</td><td>1.28</td><td>173.21</td></tr><tr><th>7</th><td>19G21</td><td>112.14</td><td>28.87</td><td>143.0</td><td>0.06</td><td>1.16</td><td>5.54</td></tr><tr><th>8</th><td>20DT-17G</td><td>112.14</td><td>29.0</td><td>-60.8</td><td>0.590868</td><td>0.7</td><td>258.56</td></tr><tr><th>9</th><td>22G-82</td><td>112.2</td><td>29.08</td><td>96.1</td><td>0.36</td><td>1.04</td><td>183.63</td></tr><tr><th>10</th><td>22G-90</td><td>112.2</td><td>29.66</td><td>-88.1</td><td>0.06</td><td>1.8</td><td>167.24</td></tr><tr><th>11</th><td>22G-88</td><td>112.24</td><td>29.27</td><td>115.5</td><td>0.51</td><td>2.29</td><td>20.98</td></tr><tr><th>12</th><td>22G-85</td><td>112.26</td><td>29.18</td><td>90.5</td><td>0.310593</td><td>4.08</td><td>476.34</td></tr><tr><th>13</th><td>DT02G</td><td>112.26</td><td>29.59</td><td>-29.3</td><td>0.53</td><td>2.16</td><td>234.38</td></tr><tr><th>14</th><td>18S-38G</td><td>112.29</td><td>29.07</td><td>158.0</td><td>0.08</td><td>0.71</td><td>22.6</td></tr><tr><th>15</th><td>18S-25G</td><td>112.3</td><td>29.77</td><td>-88.1</td><td>0.02</td><td>0.22</td><td>112.0</td></tr><tr><th>16</th><td>18S-24G</td><td>112.3</td><td>29.81</td><td>-80.0</td><td>0.14</td><td>0.2</td><td>153.0</td></tr><tr><th>17</th><td>22G-87</td><td>112.31</td><td>29.29</td><td>40.9</td><td>0.55</td><td>2.34</td><td>421.78</td></tr><tr><th>18</th><td>DT01G</td><td>112.31</td><td>29.32</td><td>-29.1</td><td>0.24</td><td>2.13</td><td>240.8</td></tr><tr><th>19</th><td>DT03G</td><td>112.31</td><td>29.62</td><td>81.1</td><td>0.14</td><td>1.59</td><td>404.23</td></tr><tr><th>20</th><td>18S-23G</td><td>112.31</td><td>29.84</td><td>-103.0</td><td>0.2</td><td>1.0</td><td>210.0</td></tr><tr><th>21</th><td>18S-27G</td><td>112.32</td><td>29.67</td><td>97.3386</td><td>0.26</td><td>1.88</td><td>125.25</td></tr><tr><th>22</th><td>21DT-26G</td><td>112.33</td><td>29.14</td><td>-48.6</td><td>0.191896</td><td>1.70282</td><td>502.1</td></tr><tr><th>23</th><td>21DT-23G</td><td>112.33</td><td>29.21</td><td>-31.0</td><td>0.372661</td><td>2.26989</td><td>904.77</td></tr><tr><th>24</th><td>18S-37G</td><td>112.35</td><td>29.05</td><td>-49.0</td><td>0.19</td><td>0.0</td><td>65.6</td></tr><tr><th>25</th><td>22G-84</td><td>112.35</td><td>29.18</td><td>122.5</td><td>0.28</td><td>2.35</td><td>257.15</td></tr><tr><th>26</th><td>18S-22G</td><td>112.35</td><td>29.85</td><td>-120.0</td><td>0.265757</td><td>3.79</td><td>615.0</td></tr><tr><th>27</th><td>20DT-29G</td><td>112.37</td><td>28.96</td><td>-88.2</td><td>0.179396</td><td>1.98</td><td>274.92</td></tr><tr><th>28</th><td>22G-92</td><td>112.38</td><td>29.53</td><td>-35.1</td><td>0.1</td><td>1.93</td><td>111.83</td></tr><tr><th>29</th><td>18S-20G</td><td>112.38</td><td>29.88</td><td>-142.0</td><td>0.47</td><td>3.3</td><td>541.0</td></tr><tr><th>30</th><td>22G-91</td><td>112.39</td><td>29.66</td><td>177.2</td><td>1.88</td><td>4.19</td><td>164.61</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n# 取出某一行\n\n## 方法1\n\n::: {.cell execution_count=3}\n``` {.julia .cell-code}\ndf.V # df.\"V\"\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\n203-element Vector{Float64}:\n 0.08\n 0.45\n 0.17\n 0.25\n 0.97\n 0.85369167324573\n 0.06\n 0.590868123957716\n 0.36\n 0.06\n 0.51\n 0.310592788968676\n 0.53\n ⋮\n 0.11\n 0.08\n 0.47\n 0.15\n 0.11\n 0.82\n 0.07\n 0.36\n 0.12\n 0.2\n 0.3\n 0.288668959788242\n```\n:::\n:::\n\n\n## 方法2\n\n::: {.cell execution_count=4}\n``` {.julia .cell-code}\ndf[:, :V] # 这种情况下取值更改不会改变之前的数据框内容\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n203-element Vector{Float64}:\n 0.08\n 0.45\n 0.17\n 0.25\n 0.97\n 0.85369167324573\n 0.06\n 0.590868123957716\n 0.36\n 0.06\n 0.51\n 0.310592788968676\n 0.53\n ⋮\n 0.11\n 0.08\n 0.47\n 0.15\n 0.11\n 0.82\n 0.07\n 0.36\n 0.12\n 0.2\n 0.3\n 0.288668959788242\n```\n:::\n:::\n\n\n# 列名\n\n::: {.cell execution_count=5}\n``` {.julia .cell-code}\nnames(df, AbstractString) # 筛选出不同数据类型的列名\nnames(df, Float64)\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```\n6-element Vector{String}:\n \"lon\"\n \"lat\"\n \"Eh\"\n \"V\"\n \"Ni\"\n \"Ba\"\n```\n:::\n:::\n\n\n# 创建一个0行但包含全部列名的df\n\n::: {.cell execution_count=6}\n``` {.julia .cell-code}\nempty(df) # empty!()直接让目标df清空\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div class=\"data-frame\"><p>0 rows × 7 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>site</th><th>lon</th><th>lat</th><th>Eh</th><th>V</th><th>Ni</th><th>Ba</th></tr><tr><th></th><th title=\"String15\">String15</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody></tbody></table></div>\n```\n:::\n:::\n\n\n# 查看df基本信息\n\ndf维度：\n\n::: {.cell execution_count=7}\n``` {.julia .cell-code}\nsize(df) # 维度\nnrow(df) # ncol()\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```\n203\n```\n:::\n:::\n\n\n统计信息，类似R语言`summary`\n\n::: {.cell execution_count=8}\n``` {.julia .cell-code}\ndescribe(df, cols=4:7)\n```\n\n::: {.cell-output .cell-output-display execution_count=9}\n```{=html}\n<div class=\"data-frame\"><p>4 rows × 7 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>variable</th><th>mean</th><th>min</th><th>median</th><th>max</th><th>nmissing</th><th>eltype</th></tr><tr><th></th><th title=\"Symbol\">Symbol</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Int64\">Int64</th><th title=\"DataType\">DataType</th></tr></thead><tbody><tr><th>1</th><td>Eh</td><td>-54.8574</td><td>-278.3</td><td>-72.2</td><td>177.2</td><td>0</td><td>Float64</td></tr><tr><th>2</th><td>V</td><td>0.344441</td><td>0.0</td><td>0.259441</td><td>1.88</td><td>0</td><td>Float64</td></tr><tr><th>3</th><td>Ni</td><td>2.46611</td><td>0.0</td><td>2.14</td><td>8.39</td><td>0</td><td>Float64</td></tr><tr><th>4</th><td>Ba</td><td>253.259</td><td>0.01</td><td>195.07</td><td>1752.0</td><td>0</td><td>Float64</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n# 筛选df\n\n::: {.cell execution_count=9}\n``` {.julia .cell-code}\ndf[:, [:lon, :lat]]\n```\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 2 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>lon</th><th>lat</th></tr><tr><th></th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>111.8</td><td>29.07</td></tr><tr><th>2</th><td>111.93</td><td>28.94</td></tr><tr><th>3</th><td>111.95</td><td>28.98</td></tr><tr><th>4</th><td>111.98</td><td>29.11</td></tr><tr><th>5</th><td>112.03</td><td>29.04</td></tr><tr><th>6</th><td>112.07</td><td>29.09</td></tr><tr><th>7</th><td>112.14</td><td>28.87</td></tr><tr><th>8</th><td>112.14</td><td>29.0</td></tr><tr><th>9</th><td>112.2</td><td>29.08</td></tr><tr><th>10</th><td>112.2</td><td>29.66</td></tr><tr><th>11</th><td>112.24</td><td>29.27</td></tr><tr><th>12</th><td>112.26</td><td>29.18</td></tr><tr><th>13</th><td>112.26</td><td>29.59</td></tr><tr><th>14</th><td>112.29</td><td>29.07</td></tr><tr><th>15</th><td>112.3</td><td>29.77</td></tr><tr><th>16</th><td>112.3</td><td>29.81</td></tr><tr><th>17</th><td>112.31</td><td>29.29</td></tr><tr><th>18</th><td>112.31</td><td>29.32</td></tr><tr><th>19</th><td>112.31</td><td>29.62</td></tr><tr><th>20</th><td>112.31</td><td>29.84</td></tr><tr><th>21</th><td>112.32</td><td>29.67</td></tr><tr><th>22</th><td>112.33</td><td>29.14</td></tr><tr><th>23</th><td>112.33</td><td>29.21</td></tr><tr><th>24</th><td>112.35</td><td>29.05</td></tr><tr><th>25</th><td>112.35</td><td>29.18</td></tr><tr><th>26</th><td>112.35</td><td>29.85</td></tr><tr><th>27</th><td>112.37</td><td>28.96</td></tr><tr><th>28</th><td>112.38</td><td>29.53</td></tr><tr><th>29</th><td>112.38</td><td>29.88</td></tr><tr><th>30</th><td>112.39</td><td>29.66</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n# 条件筛选\n\n# 常规\n\n::: {.cell execution_count=10}\n``` {.julia .cell-code}\ndf[:, Not([:site, :lon, :lat])]\n```\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 4 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>Eh</th><th>V</th><th>Ni</th><th>Ba</th></tr><tr><th></th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>33.2</td><td>0.08</td><td>1.55</td><td>126.99</td></tr><tr><th>2</th><td>163.6</td><td>0.45</td><td>2.77</td><td>71.83</td></tr><tr><th>3</th><td>-48.0</td><td>0.17</td><td>1.18</td><td>161.81</td></tr><tr><th>4</th><td>64.8</td><td>0.25</td><td>0.59</td><td>136.21</td></tr><tr><th>5</th><td>143.1</td><td>0.97</td><td>1.83</td><td>124.54</td></tr><tr><th>6</th><td>26.0</td><td>0.853692</td><td>1.28</td><td>173.21</td></tr><tr><th>7</th><td>143.0</td><td>0.06</td><td>1.16</td><td>5.54</td></tr><tr><th>8</th><td>-60.8</td><td>0.590868</td><td>0.7</td><td>258.56</td></tr><tr><th>9</th><td>96.1</td><td>0.36</td><td>1.04</td><td>183.63</td></tr><tr><th>10</th><td>-88.1</td><td>0.06</td><td>1.8</td><td>167.24</td></tr><tr><th>11</th><td>115.5</td><td>0.51</td><td>2.29</td><td>20.98</td></tr><tr><th>12</th><td>90.5</td><td>0.310593</td><td>4.08</td><td>476.34</td></tr><tr><th>13</th><td>-29.3</td><td>0.53</td><td>2.16</td><td>234.38</td></tr><tr><th>14</th><td>158.0</td><td>0.08</td><td>0.71</td><td>22.6</td></tr><tr><th>15</th><td>-88.1</td><td>0.02</td><td>0.22</td><td>112.0</td></tr><tr><th>16</th><td>-80.0</td><td>0.14</td><td>0.2</td><td>153.0</td></tr><tr><th>17</th><td>40.9</td><td>0.55</td><td>2.34</td><td>421.78</td></tr><tr><th>18</th><td>-29.1</td><td>0.24</td><td>2.13</td><td>240.8</td></tr><tr><th>19</th><td>81.1</td><td>0.14</td><td>1.59</td><td>404.23</td></tr><tr><th>20</th><td>-103.0</td><td>0.2</td><td>1.0</td><td>210.0</td></tr><tr><th>21</th><td>97.3386</td><td>0.26</td><td>1.88</td><td>125.25</td></tr><tr><th>22</th><td>-48.6</td><td>0.191896</td><td>1.70282</td><td>502.1</td></tr><tr><th>23</th><td>-31.0</td><td>0.372661</td><td>2.26989</td><td>904.77</td></tr><tr><th>24</th><td>-49.0</td><td>0.19</td><td>0.0</td><td>65.6</td></tr><tr><th>25</th><td>122.5</td><td>0.28</td><td>2.35</td><td>257.15</td></tr><tr><th>26</th><td>-120.0</td><td>0.265757</td><td>3.79</td><td>615.0</td></tr><tr><th>27</th><td>-88.2</td><td>0.179396</td><td>1.98</td><td>274.92</td></tr><tr><th>28</th><td>-35.1</td><td>0.1</td><td>1.93</td><td>111.83</td></tr><tr><th>29</th><td>-142.0</td><td>0.47</td><td>3.3</td><td>541.0</td></tr><tr><th>30</th><td>177.2</td><td>1.88</td><td>4.19</td><td>164.61</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n::: {.cell execution_count=11}\n``` {.julia .cell-code}\ndf[:, Between(:site, :lat)]\n```\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 3 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>site</th><th>lon</th><th>lat</th></tr><tr><th></th><th title=\"String15\">String15</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>19G26</td><td>111.8</td><td>29.07</td></tr><tr><th>2</th><td>22G-80</td><td>111.93</td><td>28.94</td></tr><tr><th>3</th><td>19G22</td><td>111.95</td><td>28.98</td></tr><tr><th>4</th><td>22G-83</td><td>111.98</td><td>29.11</td></tr><tr><th>5</th><td>22G-81</td><td>112.03</td><td>29.04</td></tr><tr><th>6</th><td>20DT-19G</td><td>112.07</td><td>29.09</td></tr><tr><th>7</th><td>19G21</td><td>112.14</td><td>28.87</td></tr><tr><th>8</th><td>20DT-17G</td><td>112.14</td><td>29.0</td></tr><tr><th>9</th><td>22G-82</td><td>112.2</td><td>29.08</td></tr><tr><th>10</th><td>22G-90</td><td>112.2</td><td>29.66</td></tr><tr><th>11</th><td>22G-88</td><td>112.24</td><td>29.27</td></tr><tr><th>12</th><td>22G-85</td><td>112.26</td><td>29.18</td></tr><tr><th>13</th><td>DT02G</td><td>112.26</td><td>29.59</td></tr><tr><th>14</th><td>18S-38G</td><td>112.29</td><td>29.07</td></tr><tr><th>15</th><td>18S-25G</td><td>112.3</td><td>29.77</td></tr><tr><th>16</th><td>18S-24G</td><td>112.3</td><td>29.81</td></tr><tr><th>17</th><td>22G-87</td><td>112.31</td><td>29.29</td></tr><tr><th>18</th><td>DT01G</td><td>112.31</td><td>29.32</td></tr><tr><th>19</th><td>DT03G</td><td>112.31</td><td>29.62</td></tr><tr><th>20</th><td>18S-23G</td><td>112.31</td><td>29.84</td></tr><tr><th>21</th><td>18S-27G</td><td>112.32</td><td>29.67</td></tr><tr><th>22</th><td>21DT-26G</td><td>112.33</td><td>29.14</td></tr><tr><th>23</th><td>21DT-23G</td><td>112.33</td><td>29.21</td></tr><tr><th>24</th><td>18S-37G</td><td>112.35</td><td>29.05</td></tr><tr><th>25</th><td>22G-84</td><td>112.35</td><td>29.18</td></tr><tr><th>26</th><td>18S-22G</td><td>112.35</td><td>29.85</td></tr><tr><th>27</th><td>20DT-29G</td><td>112.37</td><td>28.96</td></tr><tr><th>28</th><td>22G-92</td><td>112.38</td><td>29.53</td></tr><tr><th>29</th><td>18S-20G</td><td>112.38</td><td>29.88</td></tr><tr><th>30</th><td>22G-91</td><td>112.39</td><td>29.66</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n## 正则表达式\n\n::: {.cell execution_count=12}\n``` {.julia .cell-code}\ndf[:, r\"l\"]\n```\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 2 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>lon</th><th>lat</th></tr><tr><th></th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>111.8</td><td>29.07</td></tr><tr><th>2</th><td>111.93</td><td>28.94</td></tr><tr><th>3</th><td>111.95</td><td>28.98</td></tr><tr><th>4</th><td>111.98</td><td>29.11</td></tr><tr><th>5</th><td>112.03</td><td>29.04</td></tr><tr><th>6</th><td>112.07</td><td>29.09</td></tr><tr><th>7</th><td>112.14</td><td>28.87</td></tr><tr><th>8</th><td>112.14</td><td>29.0</td></tr><tr><th>9</th><td>112.2</td><td>29.08</td></tr><tr><th>10</th><td>112.2</td><td>29.66</td></tr><tr><th>11</th><td>112.24</td><td>29.27</td></tr><tr><th>12</th><td>112.26</td><td>29.18</td></tr><tr><th>13</th><td>112.26</td><td>29.59</td></tr><tr><th>14</th><td>112.29</td><td>29.07</td></tr><tr><th>15</th><td>112.3</td><td>29.77</td></tr><tr><th>16</th><td>112.3</td><td>29.81</td></tr><tr><th>17</th><td>112.31</td><td>29.29</td></tr><tr><th>18</th><td>112.31</td><td>29.32</td></tr><tr><th>19</th><td>112.31</td><td>29.62</td></tr><tr><th>20</th><td>112.31</td><td>29.84</td></tr><tr><th>21</th><td>112.32</td><td>29.67</td></tr><tr><th>22</th><td>112.33</td><td>29.14</td></tr><tr><th>23</th><td>112.33</td><td>29.21</td></tr><tr><th>24</th><td>112.35</td><td>29.05</td></tr><tr><th>25</th><td>112.35</td><td>29.18</td></tr><tr><th>26</th><td>112.35</td><td>29.85</td></tr><tr><th>27</th><td>112.37</td><td>28.96</td></tr><tr><th>28</th><td>112.38</td><td>29.53</td></tr><tr><th>29</th><td>112.38</td><td>29.88</td></tr><tr><th>30</th><td>112.39</td><td>29.66</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n# 转换函数\n\n共五种方法：\n\n- combine\n\n- select\n\n- transformselect\n\n导入分组统计所需包\n\n::: {.cell execution_count=13}\n``` {.julia .cell-code}\nusing Statistics\n```\n:::\n\n\n求`V`的平均值\n\n::: {.cell execution_count=14}\n``` {.julia .cell-code}\ncombine(df, :V => mean => :mean_V)\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<div class=\"data-frame\"><p>1 rows × 1 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>mean_V</th></tr><tr><th></th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>0.344441</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n筛选`lon`\n\n::: {.cell execution_count=15}\n``` {.julia .cell-code}\nselect(df, :lon => mean => :mean_lon)\n```\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 1 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>mean_lon</th></tr><tr><th></th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>112.868</td></tr><tr><th>2</th><td>112.868</td></tr><tr><th>3</th><td>112.868</td></tr><tr><th>4</th><td>112.868</td></tr><tr><th>5</th><td>112.868</td></tr><tr><th>6</th><td>112.868</td></tr><tr><th>7</th><td>112.868</td></tr><tr><th>8</th><td>112.868</td></tr><tr><th>9</th><td>112.868</td></tr><tr><th>10</th><td>112.868</td></tr><tr><th>11</th><td>112.868</td></tr><tr><th>12</th><td>112.868</td></tr><tr><th>13</th><td>112.868</td></tr><tr><th>14</th><td>112.868</td></tr><tr><th>15</th><td>112.868</td></tr><tr><th>16</th><td>112.868</td></tr><tr><th>17</th><td>112.868</td></tr><tr><th>18</th><td>112.868</td></tr><tr><th>19</th><td>112.868</td></tr><tr><th>20</th><td>112.868</td></tr><tr><th>21</th><td>112.868</td></tr><tr><th>22</th><td>112.868</td></tr><tr><th>23</th><td>112.868</td></tr><tr><th>24</th><td>112.868</td></tr><tr><th>25</th><td>112.868</td></tr><tr><th>26</th><td>112.868</td></tr><tr><th>27</th><td>112.868</td></tr><tr><th>28</th><td>112.868</td></tr><tr><th>29</th><td>112.868</td></tr><tr><th>30</th><td>112.868</td></tr><tr><th>&vellip;</th><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n随便选\n\n::: {.cell execution_count=16}\n``` {.julia .cell-code}\nselect(df, r\"l\", \"site\", :V)\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 4 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>lon</th><th>lat</th><th>site</th><th>V</th></tr><tr><th></th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"String15\">String15</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>111.8</td><td>29.07</td><td>19G26</td><td>0.08</td></tr><tr><th>2</th><td>111.93</td><td>28.94</td><td>22G-80</td><td>0.45</td></tr><tr><th>3</th><td>111.95</td><td>28.98</td><td>19G22</td><td>0.17</td></tr><tr><th>4</th><td>111.98</td><td>29.11</td><td>22G-83</td><td>0.25</td></tr><tr><th>5</th><td>112.03</td><td>29.04</td><td>22G-81</td><td>0.97</td></tr><tr><th>6</th><td>112.07</td><td>29.09</td><td>20DT-19G</td><td>0.853692</td></tr><tr><th>7</th><td>112.14</td><td>28.87</td><td>19G21</td><td>0.06</td></tr><tr><th>8</th><td>112.14</td><td>29.0</td><td>20DT-17G</td><td>0.590868</td></tr><tr><th>9</th><td>112.2</td><td>29.08</td><td>22G-82</td><td>0.36</td></tr><tr><th>10</th><td>112.2</td><td>29.66</td><td>22G-90</td><td>0.06</td></tr><tr><th>11</th><td>112.24</td><td>29.27</td><td>22G-88</td><td>0.51</td></tr><tr><th>12</th><td>112.26</td><td>29.18</td><td>22G-85</td><td>0.310593</td></tr><tr><th>13</th><td>112.26</td><td>29.59</td><td>DT02G</td><td>0.53</td></tr><tr><th>14</th><td>112.29</td><td>29.07</td><td>18S-38G</td><td>0.08</td></tr><tr><th>15</th><td>112.3</td><td>29.77</td><td>18S-25G</td><td>0.02</td></tr><tr><th>16</th><td>112.3</td><td>29.81</td><td>18S-24G</td><td>0.14</td></tr><tr><th>17</th><td>112.31</td><td>29.29</td><td>22G-87</td><td>0.55</td></tr><tr><th>18</th><td>112.31</td><td>29.32</td><td>DT01G</td><td>0.24</td></tr><tr><th>19</th><td>112.31</td><td>29.62</td><td>DT03G</td><td>0.14</td></tr><tr><th>20</th><td>112.31</td><td>29.84</td><td>18S-23G</td><td>0.2</td></tr><tr><th>21</th><td>112.32</td><td>29.67</td><td>18S-27G</td><td>0.26</td></tr><tr><th>22</th><td>112.33</td><td>29.14</td><td>21DT-26G</td><td>0.191896</td></tr><tr><th>23</th><td>112.33</td><td>29.21</td><td>21DT-23G</td><td>0.372661</td></tr><tr><th>24</th><td>112.35</td><td>29.05</td><td>18S-37G</td><td>0.19</td></tr><tr><th>25</th><td>112.35</td><td>29.18</td><td>22G-84</td><td>0.28</td></tr><tr><th>26</th><td>112.35</td><td>29.85</td><td>18S-22G</td><td>0.265757</td></tr><tr><th>27</th><td>112.37</td><td>28.96</td><td>20DT-29G</td><td>0.179396</td></tr><tr><th>28</th><td>112.38</td><td>29.53</td><td>22G-92</td><td>0.1</td></tr><tr><th>29</th><td>112.38</td><td>29.88</td><td>18S-20G</td><td>0.47</td></tr><tr><th>30</th><td>112.39</td><td>29.66</td><td>22G-91</td><td>1.88</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n改列名\n\n::: {.cell execution_count=17}\n``` {.julia .cell-code}\nselect(df, :lon => :new_lon, :)\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<div class=\"data-frame\"><p>203 rows × 8 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>new_lon</th><th>site</th><th>lon</th><th>lat</th><th>Eh</th><th>V</th><th>Ni</th><th>Ba</th></tr><tr><th></th><th title=\"Float64\">Float64</th><th title=\"String15\">String15</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>111.8</td><td>19G26</td><td>111.8</td><td>29.07</td><td>33.2</td><td>0.08</td><td>1.55</td><td>126.99</td></tr><tr><th>2</th><td>111.93</td><td>22G-80</td><td>111.93</td><td>28.94</td><td>163.6</td><td>0.45</td><td>2.77</td><td>71.83</td></tr><tr><th>3</th><td>111.95</td><td>19G22</td><td>111.95</td><td>28.98</td><td>-48.0</td><td>0.17</td><td>1.18</td><td>161.81</td></tr><tr><th>4</th><td>111.98</td><td>22G-83</td><td>111.98</td><td>29.11</td><td>64.8</td><td>0.25</td><td>0.59</td><td>136.21</td></tr><tr><th>5</th><td>112.03</td><td>22G-81</td><td>112.03</td><td>29.04</td><td>143.1</td><td>0.97</td><td>1.83</td><td>124.54</td></tr><tr><th>6</th><td>112.07</td><td>20DT-19G</td><td>112.07</td><td>29.09</td><td>26.0</td><td>0.853692</td><td>1.28</td><td>173.21</td></tr><tr><th>7</th><td>112.14</td><td>19G21</td><td>112.14</td><td>28.87</td><td>143.0</td><td>0.06</td><td>1.16</td><td>5.54</td></tr><tr><th>8</th><td>112.14</td><td>20DT-17G</td><td>112.14</td><td>29.0</td><td>-60.8</td><td>0.590868</td><td>0.7</td><td>258.56</td></tr><tr><th>9</th><td>112.2</td><td>22G-82</td><td>112.2</td><td>29.08</td><td>96.1</td><td>0.36</td><td>1.04</td><td>183.63</td></tr><tr><th>10</th><td>112.2</td><td>22G-90</td><td>112.2</td><td>29.66</td><td>-88.1</td><td>0.06</td><td>1.8</td><td>167.24</td></tr><tr><th>11</th><td>112.24</td><td>22G-88</td><td>112.24</td><td>29.27</td><td>115.5</td><td>0.51</td><td>2.29</td><td>20.98</td></tr><tr><th>12</th><td>112.26</td><td>22G-85</td><td>112.26</td><td>29.18</td><td>90.5</td><td>0.310593</td><td>4.08</td><td>476.34</td></tr><tr><th>13</th><td>112.26</td><td>DT02G</td><td>112.26</td><td>29.59</td><td>-29.3</td><td>0.53</td><td>2.16</td><td>234.38</td></tr><tr><th>14</th><td>112.29</td><td>18S-38G</td><td>112.29</td><td>29.07</td><td>158.0</td><td>0.08</td><td>0.71</td><td>22.6</td></tr><tr><th>15</th><td>112.3</td><td>18S-25G</td><td>112.3</td><td>29.77</td><td>-88.1</td><td>0.02</td><td>0.22</td><td>112.0</td></tr><tr><th>16</th><td>112.3</td><td>18S-24G</td><td>112.3</td><td>29.81</td><td>-80.0</td><td>0.14</td><td>0.2</td><td>153.0</td></tr><tr><th>17</th><td>112.31</td><td>22G-87</td><td>112.31</td><td>29.29</td><td>40.9</td><td>0.55</td><td>2.34</td><td>421.78</td></tr><tr><th>18</th><td>112.31</td><td>DT01G</td><td>112.31</td><td>29.32</td><td>-29.1</td><td>0.24</td><td>2.13</td><td>240.8</td></tr><tr><th>19</th><td>112.31</td><td>DT03G</td><td>112.31</td><td>29.62</td><td>81.1</td><td>0.14</td><td>1.59</td><td>404.23</td></tr><tr><th>20</th><td>112.31</td><td>18S-23G</td><td>112.31</td><td>29.84</td><td>-103.0</td><td>0.2</td><td>1.0</td><td>210.0</td></tr><tr><th>21</th><td>112.32</td><td>18S-27G</td><td>112.32</td><td>29.67</td><td>97.3386</td><td>0.26</td><td>1.88</td><td>125.25</td></tr><tr><th>22</th><td>112.33</td><td>21DT-26G</td><td>112.33</td><td>29.14</td><td>-48.6</td><td>0.191896</td><td>1.70282</td><td>502.1</td></tr><tr><th>23</th><td>112.33</td><td>21DT-23G</td><td>112.33</td><td>29.21</td><td>-31.0</td><td>0.372661</td><td>2.26989</td><td>904.77</td></tr><tr><th>24</th><td>112.35</td><td>18S-37G</td><td>112.35</td><td>29.05</td><td>-49.0</td><td>0.19</td><td>0.0</td><td>65.6</td></tr><tr><th>25</th><td>112.35</td><td>22G-84</td><td>112.35</td><td>29.18</td><td>122.5</td><td>0.28</td><td>2.35</td><td>257.15</td></tr><tr><th>26</th><td>112.35</td><td>18S-22G</td><td>112.35</td><td>29.85</td><td>-120.0</td><td>0.265757</td><td>3.79</td><td>615.0</td></tr><tr><th>27</th><td>112.37</td><td>20DT-29G</td><td>112.37</td><td>28.96</td><td>-88.2</td><td>0.179396</td><td>1.98</td><td>274.92</td></tr><tr><th>28</th><td>112.38</td><td>22G-92</td><td>112.38</td><td>29.53</td><td>-35.1</td><td>0.1</td><td>1.93</td><td>111.83</td></tr><tr><th>29</th><td>112.38</td><td>18S-20G</td><td>112.38</td><td>29.88</td><td>-142.0</td><td>0.47</td><td>3.3</td><td>541.0</td></tr><tr><th>30</th><td>112.39</td><td>22G-91</td><td>112.39</td><td>29.66</td><td>177.2</td><td>1.88</td><td>4.19</td><td>164.61</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n# 尝试管道符\n\n参考学习链接：[Comparing dplyr vs DataFrames.jl](https://bkamins.github.io/julialang/2020/07/03/dplyr-vs-df.html)\n\n::: {.cell execution_count=18}\n``` {.julia .cell-code}\nusing Pipe\n```\n:::\n\n\n::: {.cell execution_count=19}\n``` {.julia .cell-code}\n@time @pipe df |>\n  combine(_, :V => (x -> x) => :V_mean, :) |>\n  (df -> begin\n    df.new_col = df.V\n    df\n  end) |>\n  filter(:V_mean => v -> v >0, _) |>\n  sort(_, :new_col)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  0.973227 seconds (3.08 M allocations: 205.192 MiB, 5.03% gc time, 99.52% compilation time)\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=20}\n```{=html}\n<div class=\"data-frame\"><p>193 rows × 9 columns</p><table class=\"data-frame\"><thead><tr><th></th><th>V_mean</th><th>site</th><th>lon</th><th>lat</th><th>Eh</th><th>V</th><th>Ni</th><th>Ba</th><th>new_col</th></tr><tr><th></th><th title=\"Float64\">Float64</th><th title=\"String15\">String15</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th><th title=\"Float64\">Float64</th></tr></thead><tbody><tr><th>1</th><td>0.01</td><td>12JH093</td><td>112.85</td><td>29.94</td><td>-218.5</td><td>0.01</td><td>2.09</td><td>184.509</td><td>0.01</td></tr><tr><th>2</th><td>0.02</td><td>18S-25G</td><td>112.3</td><td>29.77</td><td>-88.1</td><td>0.02</td><td>0.22</td><td>112.0</td><td>0.02</td></tr><tr><th>3</th><td>0.04</td><td>12JH076</td><td>112.58</td><td>30.29</td><td>-90.0</td><td>0.04</td><td>2.47</td><td>170.86</td><td>0.04</td></tr><tr><th>4</th><td>0.04</td><td>18G-05</td><td>113.51</td><td>29.84</td><td>87.5</td><td>0.04</td><td>0.31</td><td>59.45</td><td>0.04</td></tr><tr><th>5</th><td>0.05</td><td>22G-86</td><td>112.43</td><td>29.39</td><td>-7.6</td><td>0.05</td><td>1.47</td><td>160.13</td><td>0.05</td></tr><tr><th>6</th><td>0.05</td><td>22G-73</td><td>112.81</td><td>29.42</td><td>-78.5</td><td>0.05</td><td>3.49</td><td>120.7</td><td>0.05</td></tr><tr><th>7</th><td>0.05</td><td>18G-11</td><td>113.26</td><td>29.61</td><td>-83.2</td><td>0.05</td><td>0.06</td><td>275.26</td><td>0.05</td></tr><tr><th>8</th><td>0.0558746</td><td>22G-70</td><td>113.56</td><td>29.88</td><td>-50.4</td><td>0.0558746</td><td>8.39</td><td>58.55</td><td>0.0558746</td></tr><tr><th>9</th><td>0.06</td><td>19G21</td><td>112.14</td><td>28.87</td><td>143.0</td><td>0.06</td><td>1.16</td><td>5.54</td><td>0.06</td></tr><tr><th>10</th><td>0.06</td><td>22G-90</td><td>112.2</td><td>29.66</td><td>-88.1</td><td>0.06</td><td>1.8</td><td>167.24</td><td>0.06</td></tr><tr><th>11</th><td>0.06</td><td>19G14</td><td>112.69</td><td>29.15</td><td>-81.0</td><td>0.06</td><td>0.99</td><td>120.31</td><td>0.06</td></tr><tr><th>12</th><td>0.07</td><td>18G-19</td><td>112.63</td><td>29.78</td><td>-14.3</td><td>0.07</td><td>0.45</td><td>510.65</td><td>0.07</td></tr><tr><th>13</th><td>0.07</td><td>18G-25</td><td>112.64</td><td>29.95</td><td>-72.0</td><td>0.07</td><td>1.31</td><td>58.46</td><td>0.07</td></tr><tr><th>14</th><td>0.07</td><td>18G-26</td><td>112.68</td><td>29.97</td><td>-103.0</td><td>0.07</td><td>0.52</td><td>34.09</td><td>0.07</td></tr><tr><th>15</th><td>0.07</td><td>18G-28</td><td>112.72</td><td>29.96</td><td>-104.0</td><td>0.07</td><td>0.8</td><td>63.87</td><td>0.07</td></tr><tr><th>16</th><td>0.07</td><td>12JH163</td><td>113.02</td><td>29.55</td><td>-135.8</td><td>0.07</td><td>3.62</td><td>430.359</td><td>0.07</td></tr><tr><th>17</th><td>0.07</td><td>18G-03</td><td>113.61</td><td>29.94</td><td>-42.7</td><td>0.07</td><td>1.62</td><td>289.92</td><td>0.07</td></tr><tr><th>18</th><td>0.07</td><td>11JH183</td><td>113.77</td><td>30.07</td><td>-54.8787</td><td>0.07</td><td>0.44</td><td>155.31</td><td>0.07</td></tr><tr><th>19</th><td>0.08</td><td>19G26</td><td>111.8</td><td>29.07</td><td>33.2</td><td>0.08</td><td>1.55</td><td>126.99</td><td>0.08</td></tr><tr><th>20</th><td>0.08</td><td>18S-38G</td><td>112.29</td><td>29.07</td><td>158.0</td><td>0.08</td><td>0.71</td><td>22.6</td><td>0.08</td></tr><tr><th>21</th><td>0.08</td><td>19G18</td><td>112.65</td><td>28.98</td><td>55.0</td><td>0.08</td><td>0.49</td><td>70.17</td><td>0.08</td></tr><tr><th>22</th><td>0.08</td><td>22G-74</td><td>112.78</td><td>29.29</td><td>-64.1</td><td>0.08</td><td>4.06</td><td>412.63</td><td>0.08</td></tr><tr><th>23</th><td>0.08</td><td>11JH164</td><td>113.39</td><td>30.07</td><td>-77.5002</td><td>0.08</td><td>0.59</td><td>157.01</td><td>0.08</td></tr><tr><th>24</th><td>0.08</td><td>11JH161</td><td>113.69</td><td>30.09</td><td>-54.3</td><td>0.08</td><td>0.63</td><td>213.16</td><td>0.08</td></tr><tr><th>25</th><td>0.09</td><td>18G-27</td><td>112.72</td><td>29.92</td><td>-75.6</td><td>0.09</td><td>0.09</td><td>39.12</td><td>0.09</td></tr><tr><th>26</th><td>0.09</td><td>22G-20</td><td>112.97</td><td>29.52</td><td>-124.0</td><td>0.09</td><td>7.03</td><td>370.84</td><td>0.09</td></tr><tr><th>27</th><td>0.09</td><td>22G-12</td><td>113.06</td><td>29.96</td><td>-86.4</td><td>0.09</td><td>3.28</td><td>180.59</td><td>0.09</td></tr><tr><th>28</th><td>0.09</td><td>11JH162</td><td>113.64</td><td>30.09</td><td>-72.7851</td><td>0.09</td><td>0.59</td><td>100.8</td><td>0.09</td></tr><tr><th>29</th><td>0.1</td><td>22G-92</td><td>112.38</td><td>29.53</td><td>-35.1</td><td>0.1</td><td>1.93</td><td>111.83</td><td>0.1</td></tr><tr><th>30</th><td>0.1</td><td>19G19</td><td>112.75</td><td>28.91</td><td>78.5</td><td>0.1</td><td>0.45</td><td>15.27</td><td>0.1</td></tr><tr><th>&vellip;</th><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td><td>&vellip;</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "05_Julia_DataFrames_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}